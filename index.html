<!doctype html>
<html>
<head>
    <title>Convertor2.0</title>
</head>
<body>
<table>
    <tr>
        <th>
            <canvas id="canvas" width="500" height="500" style="border:1px solid black;">
                Этот элемент не поддерживается.
            </canvas>
        </th>
    </tr>
    <tr>
        <th>
            Результат:<content id="ang1">180</content>(<content id="ang2">-180</content>)°
            <div><input type="number" value="1" id="up" onchange="calc()"></div>
            <div><input type="number" value="1" id="down" onchange="calc()"></div>
        </th>
    </tr>
</table>
<script>
var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
function degToRad (deg) { return deg / 180 * Math.PI; }
function draw(angle){

	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.beginPath();
	ctx.moveTo(250,0);
	ctx.lineTo(250, 500);
	ctx.closePath();

	ctx.moveTo(0,250);
	ctx.lineTo(500, 250);
	ctx.closePath();

	ctx.moveTo(250,250);
	ctx.arc(250,250,200,0,Math.PI*2,true);
	ctx.stroke();

	x1 = (1 / (1 + Math.tan(degToRad(angle))**2))**0.5;
	x2 = -1 * (1 / (1 + Math.tan(degToRad(angle))**2))**0.5;
	y1 = (1-x1**2)**0.5;
	y2 = -1*(1-x2**2)**0.5;
	ctx.beginPath();
	if (angle <= 90){
		ctx.arc(250+x1*200,250+y2*200,5,0,Math.PI*2,true);}
	else if(angle <= 180){
		ctx.arc(250+x2*200,250+y2*200,5,0,Math.PI*2,true);}
	else if(angle <= 270){
		ctx.arc(250+x2*200,250+y1*200,5,0,Math.PI*2,true);}
	else if(angle <= 360){
		ctx.arc(250+x1*200,250+y1*200,5,0,Math.PI*2,true);}
	ctx.fillStyle = "red";
	ctx.fill()
	ctx.stroke();}

function calc(){
x=Number(document.getElementById('up').value);
y= Number(document.getElementById('down').value);
angle = ((180/y) * x) % 360
document.getElementById('ang1').innerHTML = angle;
if (angle >= 0){
draw(angle);
document.getElementById('ang2').innerHTML = angle - 360;
}
else{
draw(360 + angle);
document.getElementById('ang2').innerHTML = angle + 360;
}
}

draw(180);


</script>
</body>
</html>
